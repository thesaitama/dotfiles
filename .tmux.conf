
#   ________  _____  ___  __
#  /_  __/  |/  / / / / |/ /
#   / / / /|_/ / / / /|   /
#  / / / /  / / /_/ //   |
# /_/ /_/  /_/\____//_/|_|

# thesaitama@ .tmux.conf

# note:
# set is alias of set-options
# setw is alias of set-windows-options
# bind is alias of bind-key
# -a option mean append params

# ------------------------------------------------------------------------
# general

set -sg escape-time 0
set -g history-limit 5000
set -g visual-activity on
setw -g monitor-activity on
setw -g clock-mode-style 24
# setw -g automatic-rename off

# ------------------------------------------------------------------------
# key bind

set -g prefix C-t
unbind C-b

bind | split-window -hc "#{pane_current_path}"
bind - split-window -vc "#{pane_current_path}"

bind k select-pane -U
bind j select-pane -D
bind h select-pane -L
bind l select-pane -R

# resize pane with repeat
bind -r H resize-pane -L 1
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 1

bind A command-prompt -p "rename-window:" "rename-window %%"
bind V command-prompt -p "split-v-run:" "split-window -p 70 '%%'"
bind S command-prompt -p "split-h-run:" "split-window -h '%%'"
bind ^s display-panes \; command-prompt -p "swap-pane:" "swap-pane -s %1"

bind g command-prompt -p "Google:" "split-window -p 70 'source ~/.bashrc; google %%'"
bind W command-prompt -p "Wikitionary:" "split-window -p 70 'source ~/.bashrc; wikitionary %%'"
bind U command-prompt -p "URL:" "split-window -p 70 'w3m %%'"

bind R source-file ~/.tmux.conf \; display "reloaded."

bind 0 run "tmux split-window -l 12 'bash -ci ftpane'"

# ------------------------------------------------------------------------
# mouse

set -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# ------------------------------------------------------------------------
# terminal color

set -g default-terminal "xterm-256color"

set -ag terminal-overrides ",xterm*:Tc"              # true color
set -ag terminal-overrides "setb24=\E[48;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%dm,"
set -ag terminal-overrides "setf24=\E[38;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%dm,"
set -ag terminal-overrides ",sitm=\E[3m,ritm=\E[23m" # italic
set -ag terminal-overrides ',*:U8=0'                 # border characters

# ------------------------------------------------------------------------
# command-line

set -g message-fg default
set -g message-bg colour239

# ------------------------------------------------------------------------
# status line

set -g status-position top
set -g status-interval 1

set -g status-fg default
set -g status-bg colour239

set -g status-justify "centre"
set -g status-left-length 100
set -g status-right-length 100

setw -g window-status-format "#[bg=colour242] #I:#P #W #[default]"
setw -g window-status-current-format "#[bg=colour034] #I:#P #W#F #[default]"

set -g status-left '#[bg=colour242]#{?client_prefix,#[reverse],}@#h: #S #[default]'
set -ag status-left '#{?window_zoomed_flag,[+zoom],} '
set -g status-right " #(tmux-status-git)#(tmux-status-load)#[bg=colour242,fg=white] %m/%d "

# ------------------------------------------------------------------------
# pane

set -g display-panes-time 10000

set -g pane-border-status top
set -g pane-border-format "#[fg=default,fg=blue]#{?pane_active,#[reverse],} #P #[default]"
set -ag pane-border-format "#(tmux-pane-border #{pane_current_path})"

set -g pane-border-fg colour010
set -g pane-border-bg default
set -g pane-active-border-fg colour014
set -g pane-active-border-bg default

setw -g pane-base-index 1

# ------------------------------------------------------------------------
# screen saver

# set -g lock-after-time 600
# set -g lock-command "cmatrix -s -b"

# ------------------------------------------------------------------------
# special

if-shell "uname | grep -q Darwin" "source-file ~/dotfiles/.tmux.conf.osx" ""

# ------------------------------------------------------------------------
